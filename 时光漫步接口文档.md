# 时光漫步 接口文档-V1.0

> ## 漫步生活，分享快乐



## 1. 用户相关接口

### 1.1 注册

#### 1.1.1 基本信息

> 请求路径：/user/register
>
> 请求方式：POST
>
> 接口描述：该接口用于注册新用户



#### 1.1.2 请求参数

请求参数格式：x-www-form-urlencoded

请求参数说明：

| 参数名称  | 说明       | 类型   | 是否必须 | 备注                  |
| --------- | ---------- | ------ | -------- | --------------------- |
| username  | 用户名     | string | 是       | 5~16位非空字符        |
| password  | 密码       | string | 是       | 5~16位非空字符        |
| email     | 邮箱       | string | 是       | 邮箱                  |
| phone     | 手机号     | Number | 是       | 手机号                |
| code      | 验证码     | string | 是       | 图形验证码6位非空字符 |
| phoneCode | 手机验证码 | string | 是       | 手机验证码6位非空字符 |

请求数据样例：

```shell
username=zhangsan&password=123456&email=inmb@acbug.cn&phone=13145211145145384&code=1a2c3d&phoneCode=1a2c3d
```



#### 1.1.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```



### 1.2 登录

#### 1.2.1 基本信息

> 请求路径：/user/login
>
> 请求方式：POST
>
> 接口描述：该接口用于登录

#### 1.2.2 请求参数

请求参数格式：x-www-form-urlencoded

请求参数说明：

| 参数名称 | 说明       | 类型   | 是否必须 | 备注           |
| -------- | ---------- | ------ | -------- | -------------- |
| username | 用户名     | string | 是       | 5~16位非空字符 |
| password | 密码       | string | 是       | 5~16位非空字符 |
| code     | 图形验证码 | string | 是       | 6位非空字符    |

请求数据样例：

```shell
username=zhangsan&password=123456&code=1a2c3d
```

·

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```



### 1.3 获取用户详细信息

#### 1.3.1 基本信息

> 请求路径：/user/userInfo
>
> 请求方式：GET
>
> 接口描述：该接口用于获取当前已登录用户的详细信息

#### 1.3.2 请求参数

无

#### 1.3.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称          | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------------- | ------ | -------- | ------ | --------------------- | -------- |
| code          | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message       | string | 非必须   |        | 提示信息              |          |
| data          | object | 必须     |        | 返回的数据            |          |
| \|-id         | number | 非必须   |        | 主键ID                |          |
| \|-username   | srting | 非必须   |        | 用户名                |          |
| \|-nickname   | string | 非必须   |        | 昵称                  |          |
| \|-phone      | number | 非必须   |        | 手机号                |          |
| \|-email      | string | 非必须   |        | 邮箱                  |          |
| \|-userPic    | string | 非必须   |        | 头像地址              |          |
| \|-createTime | string | 非必须   |        | 创建时间              |          |
| \|-updateTime | string | 非必须   |        | 更新时间              |          |
| \|-identity   | string | 必须     |        | 身份                  |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": {
        "id": 5,
        "username": "wangba",
        "nickname": "",
        "email": "",
        "userPic": "",
        "createTime": "2023-09-02 22:21:31",
        "updateTime": "2023-09-02 22:21:31"
    }
}
```



### 1.4 更新用户昵称

#### 1.4.1 基本信息

> 请求路径：/user/updateNickname
>
> 请求方式：PUT
>
> 接口描述：该接口用于更新已登录用户的昵称

#### 1.4.2 请求参数

请求参数格式：application/json

请求参数说明：

| 参数名称  | 说明       | 类型   | 是否必须 | 备注           |
| --------- | ---------- | ------ | -------- | -------------- |
| id        | 主键ID     | number | 是       |                |
| nickname  | 昵称       | string | 是       | 1~10位非空字符 |
| email     | 邮箱       | string | 是       | 满足邮箱的格式 |
| emailCode | 邮箱验证码 | string | 是       |                |

请求数据样例：

```json
{
    "id":5,
    "nickname":"i囡漫笔",
    "email":"inmb@acbug.cn",
    "emailCode":"1a2c3d"
}
```

#### 1.4.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```



### 1.5 使用邮箱验证码更新用户密码

#### 1.5.1 基本信息

> 请求路径：/user/changePasswordByMail
>
> 请求方式：PUT
>
> 接口描述：该接口用于使用邮箱更新已登录用户的密码

#### 1.5.2 请求参数

请求参数格式：application/json

请求参数说明：

| 参数名称    | 说明       | 类型   | 是否必须 | 备注           |
| ----------- | ---------- | ------ | -------- | -------------- |
| id          | 主键ID     | number | 是       |                |
| oldPassword | 旧密码     | string | 是       | 5~16位非空字符 |
| newPassword | 新密码     | string | 是       | 5~16位非空字符 |
| email       | 邮箱       | string | 是       | 满足邮箱的格式 |
| emailCode   | 邮箱验证码 | string | 是       | 6位邮箱验证码  |

请求数据样例：

```json
{
    "id":5,
    "oldPassword":"123456",
    "newPassword":"12345678",
    "email":"inmb@acbug.cn",
    "emailCode":"1a2c3d"
}
```

#### 1.5.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```

### 1.6 使用手机验证码更新用户密码

#### 1.6.1 基本信息

> 请求路径：/user/changePasswordByPhone
>
> 请求方式：PUT
>
> 接口描述：该接口用于使用邮箱更新已登录用户的密码

#### 1.6.2 请求参数

请求参数格式：application/json

请求参数说明：

| 参数名称    | 说明       | 类型   | 是否必须 | 备注           |
| ----------- | ---------- | ------ | -------- | -------------- |
| id          | 主键ID     | number | 是       |                |
| oldPassword | 旧密码     | string | 是       | 5~16位非空字符 |
| newPassword | 新密码     | string | 是       | 5~16位非空字符 |
| phone       | 邮箱       | string | 是       | 11位数字       |
| phoneCode   | 邮箱验证码 | string | 是       | 6位邮箱验证码  |

请求数据样例：

```json
{
    "id":5,
    "oldPassword":"123456",
    "newPassword":"12345678",
    "phone":"13145215384",
    "phoneCode":"1a2c3d"
}
```

#### 1.6.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```



### 1.7 更新用户头像

#### 1.7.1 基本信息

> 请求路径：/user/updateAvatar
>
> 请求方式：PATCH
>
> 接口描述：该接口用于更新已登录用户的头像

#### 1.7.2 请求参数

请求参数格式：queryString

请求参数说明：

| 参数名称  | 说明     | 类型   | 是否必须 | 备注    |
| --------- | -------- | ------ | -------- | ------- |
| avatarUrl | 头像地址 | string | 是       | url地址 |

请求数据样例：

```shell
avatarUrl=
https://big-event-gwd.oss-cn-beijing.aliyuncs.com/9bf1cf5b-1420-4c1b-91ad-e0f4631cbed4.png
```

#### 1.7.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```

